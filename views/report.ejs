<%- include('partials/header') %>

<div class="form-container">
    <div class="form-header">
        <h1>Incident Report</h1>
        <div class="progress-bar">
            <div class="progress" data-progress="<%- (currentPage / totalPages) * 100 %>"></div>
        </div>
    </div>

    <form id="incidentForm" class="multi-page-form">
        <!-- Page 1: Policy Agreements -->
        <div class="form-page" data-page="1">
            <h2>Policy Agreements</h2>
            
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="termsAgreement" name="termsAgreement" required>
                    I agree to the <a href="#" class="policy-link" data-modal="termsModal">Terms and Conditions</a>
                </label>
            </div>

            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="privacyAgreement" name="privacyAgreement" required>
                    I agree to the <a href="#" class="policy-link" data-modal="privacyModal">Privacy Policy</a>
                </label>
            </div>

            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="esignatureAgreement" name="esignatureAgreement" required>
                    I agree to the <a href="#" class="policy-link" data-modal="esignatureModal">E-Signature Policy</a>
                </label>
            </div>
        </div>

        <!-- Page 2: Personal Information -->
        <div class="form-page" data-page="2">
            <h2>Personal Information</h2>
            <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" name="firstName" required autocomplete="given-name">
            </div>
            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" name="lastName" required autocomplete="family-name">
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" id="address" name="address" required autocomplete="street-address">
            </div>
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" id="city" name="city" required autocomplete="address-level2">
            </div>
            <div class="form-group">
                <label for="state">State</label>
                <input type="text" id="state" name="state" required autocomplete="address-level1">
            </div>
            <div class="form-group">
                <label for="zip">ZIP Code</label>
                <input type="text" id="zip" name="zip" required autocomplete="postal-code">
            </div>
            <div class="form-group">
                <label for="homePhone">Home Phone Number</label>
                <input type="tel" id="homePhone" name="homePhone" required autocomplete="tel">
            </div>
            <div class="form-group">
                <label for="workPhone">Work Phone Number</label>
                <input type="tel" id="workPhone" name="workPhone" autocomplete="tel">
            </div>
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" required autocomplete="email">
            </div>
            <div class="form-group">
                <label for="ownsVehicle">Do you own your own vehicle?</label>
                <select id="ownsVehicle" name="ownsVehicle" required>
                    <option value="">Select an option</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>
            <div class="form-group">
                <label for="insuranceCompany">Rental Insurance Company</label>
                <input type="text" id="insuranceCompany" name="insuranceCompany" required>
            </div>
            <div class="form-group">
                <label for="policyNumber">Insurance Policy Number</label>
                <input type="text" id="policyNumber" name="policyNumber" required>
            </div>
        </div>

        <!-- Page 3: Vehicle Information -->
        <div class="form-page" data-page="3">
            <h2>Vehicle Information</h2>
            <div class="form-group">
                <label for="vehicleNumber">Vehicle Number</label>
                <input type="text" id="vehicleNumber" name="vehicleNumber" required>
            </div>
            <div class="form-group">
                <label for="licensePlate">License Plate</label>
                <input type="text" id="licensePlate" name="licensePlate" required>
            </div>
            <div class="form-group">
                <label for="licenseState">License Plate State</label>
                <select id="licenseState" name="licenseState" required>
                    <option value="">Select State</option>
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>
            </div>
            <div class="form-group">
                <label for="vehicleMake">Vehicle Make</label>
                <input type="text" id="vehicleMake" name="vehicleMake" required>
            </div>
            <div class="form-group">
                <label for="vehicleModel">Vehicle Model</label>
                <input type="text" id="vehicleModel" name="vehicleModel" required>
            </div>
            <div class="form-group">
                <label for="odometer">Odometer Reading</label>
                <input type="number" id="odometer" name="odometer" required min="0" step="1">
            </div>
        </div>

        <!-- Page 4: Incident Details -->
        <div class="form-page" data-page="4">
            <h2>Incident Details</h2>
            <div class="form-group">
                <label for="renterOperating">Was the renter operating the vehicle?</label>
                <select id="renterOperating" name="renterOperating" required>
                    <option value="">Select an option</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>

            <div id="operatorInfo" class="hidden">
                <h3>Operator Information</h3>
                <div class="form-group">
                    <label for="operatorFirstName">First Name</label>
                    <input type="text" id="operatorFirstName" name="operatorFirstName" autocomplete="given-name">
                </div>
                <div class="form-group">
                    <label for="operatorLastName">Last Name</label>
                    <input type="text" id="operatorLastName" name="operatorLastName" autocomplete="family-name">
                </div>
                <div class="form-group">
                    <label for="operatorDOB">Date of Birth</label>
                    <input type="date" id="operatorDOB" name="operatorDOB">
                </div>
                <div class="form-group">
                    <label for="operatorPhone">Phone Number</label>
                    <input type="tel" id="operatorPhone" name="operatorPhone" autocomplete="tel">
                </div>
                <div class="form-group">
                    <label for="operatorAddress">Address</label>
                    <input type="text" id="operatorAddress" name="operatorAddress" autocomplete="street-address">
                </div>
                <div class="form-group">
                    <label for="operatorCity">City</label>
                    <input type="text" id="operatorCity" name="operatorCity" autocomplete="address-level2">
                </div>
                <div class="form-group">
                    <label for="operatorState">State</label>
                    <input type="text" id="operatorState" name="operatorState" autocomplete="address-level1">
                </div>
                <div class="form-group">
                    <label for="operatorZip">ZIP Code</label>
                    <input type="text" id="operatorZip" name="operatorZip" autocomplete="postal-code">
                </div>
                <div class="form-group">
                    <label for="operatorLicense">Driver's License Number</label>
                    <input type="text" id="operatorLicense" name="operatorLicense">
                </div>
                <div class="form-group">
                    <label for="operatorLicenseState">Driver's License State/Country</label>
                    <input type="text" id="operatorLicenseState" name="operatorLicenseState">
                </div>
                <div class="form-group">
                    <label for="operatorOwnsVehicle">Do they own their own vehicle?</label>
                    <select id="operatorOwnsVehicle" name="operatorOwnsVehicle">
                        <option value="">Select an option</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="operatorEmployer">Employer</label>
                    <input type="text" id="operatorEmployer" name="operatorEmployer">
                </div>
                <div class="form-group">
                    <label for="operatorWorkPhone">Work Phone Number</label>
                    <input type="tel" id="operatorWorkPhone" name="operatorWorkPhone">
                </div>
                <div class="form-group">
                    <label for="operatorWorkAddress">Work Address</label>
                    <input type="text" id="operatorWorkAddress" name="operatorWorkAddress">
                </div>
                <div class="form-group">
                    <label for="operatorWorkCity">Work City</label>
                    <input type="text" id="operatorWorkCity" name="operatorWorkCity">
                </div>
                <div class="form-group">
                    <label for="operatorWorkState">Work State</label>
                    <input type="text" id="operatorWorkState" name="operatorWorkState">
                </div>
                <div class="form-group">
                    <label for="operatorWorkZip">Work ZIP Code</label>
                    <input type="text" id="operatorWorkZip" name="operatorWorkZip">
                </div>
                <div class="form-group">
                    <label for="operatorInsuranceCompany">Operator's Insurance Company</label>
                    <input type="text" id="operatorInsuranceCompany" name="operatorInsuranceCompany">
                </div>
                <div class="form-group">
                    <label for="operatorPolicyNumber">Operator's Insurance Policy Number</label>
                    <input type="text" id="operatorPolicyNumber" name="operatorPolicyNumber">
                </div>
            </div>

            <div class="form-group">
                <label for="vehicleUse">Was the vehicle use for work or personal?</label>
                <select id="vehicleUse" name="vehicleUse" required>
                    <option value="">Select an option</option>
                    <option value="work">Work</option>
                    <option value="personal">Personal</option>
                </select>
            </div>

            <div class="form-group">
                <label for="creditCardCoverage">Do you have Credit Card Damage Coverage?</label>
                <select id="creditCardCoverage" name="creditCardCoverage" required>
                    <option value="">Select an option</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" rows="4" required></textarea>
            </div>
        </div>

        <!-- Page 5: Incident Location -->
        <div class="form-page" data-page="5">
            <h2>Incident Location</h2>
            <div class="form-group">
                <label for="knowsLocation">Do you know where the damage occurred?</label>
                <select id="knowsLocation" name="knowsLocation" required>
                    <option value="">Select an option</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>

            <div id="locationInfo" class="hidden">
                <div class="form-group">
                    <label for="incidentDate">Date of Incident</label>
                    <input type="date" id="incidentDate" name="incidentDate" required>
                </div>
                <div class="form-group">
                    <label for="incidentTime">Time of Incident</label>
                    <input type="time" id="incidentTime" name="incidentTime" required>
                </div>
                <div class="form-group">
                    <label for="weather">Weather Conditions</label>
                    <select id="weather" name="weather" required>
                        <option value="">Select weather condition</option>
                        <option value="clear">Clear</option>
                        <option value="cloudy">Cloudy</option>
                        <option value="rain">Rain</option>
                        <option value="snow">Snow</option>
                        <option value="fog">Fog</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="incidentAddress">Address of Incident</label>
                    <input type="text" id="incidentAddress" name="incidentAddress" required>
                </div>
                <div class="form-group">
                    <label for="incidentCity">City</label>
                    <input type="text" id="incidentCity" name="incidentCity" required>
                </div>
                <div class="form-group">
                    <label for="incidentState">State</label>
                    <select id="incidentState" name="incidentState" required>
                        <option value="">Select State</option>
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="incidentZip">ZIP Code</label>
                    <input type="text" id="incidentZip" name="incidentZip" required>
                </div>
                <div class="form-group">
                    <label for="policeDepartment">Police Department that Responded</label>
                    <input type="text" id="policeDepartment" name="policeDepartment">
                </div>
                <div class="form-group">
                    <label for="policeReportNumber">Police Report Number</label>
                    <input type="text" id="policeReportNumber" name="policeReportNumber">
                </div>
            </div>
        </div>

        <!-- Page 6: Vehicle Damage -->
        <div class="form-page" data-page="6">
            <h2>Vehicle Damage</h2>
            
            <!-- Other Vehicle Information -->
            <div class="form-group">
                <label for="otherVehicleInvolved">Was there damage to other vehicles?</label>
                <select id="otherVehicleInvolved" name="otherVehicleInvolved" required>
                    <option value="">Select an option</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>

            <div id="otherVehicleInfo" class="hidden">
                <h3>Other Vehicle Owner Information</h3>
                <div class="form-group">
                    <label for="otherOwnerFirstName">First Name</label>
                    <input type="text" id="otherOwnerFirstName" name="otherOwnerFirstName" autocomplete="given-name">
                </div>
                <div class="form-group">
                    <label for="otherOwnerLastName">Last Name</label>
                    <input type="text" id="otherOwnerLastName" name="otherOwnerLastName" autocomplete="family-name">
                </div>
                <div class="form-group">
                    <label for="otherOwnerAddress">Address</label>
                    <input type="text" id="otherOwnerAddress" name="otherOwnerAddress" autocomplete="street-address">
                </div>
                <div class="form-group">
                    <label for="otherOwnerCity">City</label>
                    <input type="text" id="otherOwnerCity" name="otherOwnerCity" autocomplete="address-level2">
                </div>
                <div class="form-group">
                    <label for="otherOwnerState">State</label>
                    <select id="otherOwnerState" name="otherOwnerState" autocomplete="address-level1">
                        <option value="">Select State</option>
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="otherOwnerZip">ZIP Code</label>
                    <input type="text" id="otherOwnerZip" name="otherOwnerZip" autocomplete="postal-code">
                </div>
                <div class="form-group">
                    <label for="otherOwnerPhone">Phone Number</label>
                    <input type="tel" id="otherOwnerPhone" name="otherOwnerPhone" autocomplete="tel">
                </div>

                <div class="form-group">
                    <label for="ownerOperating">Was the owner operating the vehicle?</label>
                    <select id="ownerOperating" name="ownerOperating">
                        <option value="">Select an option</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>

                <div id="otherOperatorInfo" class="hidden">
                    <h3>Other Vehicle Operator Information</h3>
                    <div class="form-group">
                        <label for="otherOperatorFirstName">First Name</label>
                        <input type="text" id="otherOperatorFirstName" name="otherOperatorFirstName" autocomplete="given-name">
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorLastName">Last Name</label>
                        <input type="text" id="otherOperatorLastName" name="otherOperatorLastName" autocomplete="family-name">
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorAddress">Address</label>
                        <input type="text" id="otherOperatorAddress" name="otherOperatorAddress" autocomplete="street-address">
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorCity">City</label>
                        <input type="text" id="otherOperatorCity" name="otherOperatorCity" autocomplete="address-level2">
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorState">State</label>
                        <select id="otherOperatorState" name="otherOperatorState" autocomplete="address-level1">
                            <option value="">Select State</option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorZip">ZIP Code</label>
                        <input type="text" id="otherOperatorZip" name="otherOperatorZip" autocomplete="postal-code">
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorPhone">Phone Number</label>
                        <input type="tel" id="otherOperatorPhone" name="otherOperatorPhone" autocomplete="tel">
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorLicense">Driver's License Number</label>
                        <input type="text" id="otherOperatorLicense" name="otherOperatorLicense">
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorLicenseState">Driver's License State/Country</label>
                        <input type="text" id="otherOperatorLicenseState" name="otherOperatorLicenseState">
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorInsurance">Insurance Company</label>
                        <input type="text" id="otherOperatorInsurance" name="otherOperatorInsurance">
                    </div>
                    <div class="form-group">
                        <label for="otherOperatorPolicy">Insurance Policy Number</label>
                        <input type="text" id="otherOperatorPolicy" name="otherOperatorPolicy">
                    </div>
                </div>

                <h3>Other Vehicle Information</h3>
                <div class="form-group">
                    <label for="otherVehicleMake">Vehicle Make</label>
                    <input type="text" id="otherVehicleMake" name="otherVehicleMake">
                </div>
                <div class="form-group">
                    <label for="otherVehicleModel">Vehicle Model</label>
                    <input type="text" id="otherVehicleModel" name="otherVehicleModel">
                </div>
                <div class="form-group">
                    <label for="otherVehicleOdometer">Odometer Reading</label>
                    <input type="number" id="otherVehicleOdometer" name="otherVehicleOdometer" min="0" step="1">
                </div>
                <div class="form-group">
                    <label for="otherVehicleLicense">License Plate</label>
                    <input type="text" id="otherVehicleLicense" name="otherVehicleLicense">
                </div>
                <div class="form-group">
                    <label for="otherVehicleLicenseState">License Plate State</label>
                    <select id="otherVehicleLicenseState" name="otherVehicleLicenseState">
                        <option value="">Select State</option>
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="otherVehicleDamage">Description of Damage</label>
                    <textarea id="otherVehicleDamage" name="otherVehicleDamage" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label for="otherVehicleDriveable">Is the vehicle driveable?</label>
                    <select id="otherVehicleDriveable" name="otherVehicleDriveable">
                        <option value="">Select an option</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            </div>

            <!-- Rental Vehicle Damage -->
            <h3>Rental Vehicle Damage</h3>
            <div class="form-group">
                <label>Click on the vehicle image to mark damage locations</label>
                <div class="vehicle-diagram-container">
                    <img src="/images/vehicle-diagram.png" alt="Vehicle Diagram" class="vehicle-image" id="vehicleImage">
                    <div id="damageMarkers"></div>
                </div>
                <div class="damage-list" id="damageList"></div>
            </div>
            <div class="form-group">
                <label for="damageDescription">Additional Damage Description</label>
                <textarea id="damageDescription" name="damageDescription" rows="4"></textarea>
            </div>
        </div>

        <!-- Page 7: Witness Information -->
        <div class="form-page" data-page="7">
            <h2>Witness Information</h2>
            
            <div class="form-group">
                <label for="hasWitnesses">Were there any witnesses to the incident?</label>
                <select id="hasWitnesses" name="hasWitnesses" required>
                    <option value="">Select an option</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>

            <div id="witnessInfo" class="hidden">
                <div class="form-group">
                    <label for="witnessCount">How many witnesses?</label>
                    <input type="number" id="witnessCount" name="witnessCount" min="1" max="10">
                </div>

                <div id="witnessesContainer"></div>
            </div>
        </div>

        <!-- Page 8: Accident Description -->
        <div class="form-page" data-page="8">
            <h2>Accident Description</h2>
            
            <div class="form-group">
                <label for="directionOfTravel">Direction of Travel</label>
                <select id="directionOfTravel" name="directionOfTravel" required>
                    <option value="">Select direction</option>
                    <option value="north">North</option>
                    <option value="south">South</option>
                    <option value="east">East</option>
                    <option value="west">West</option>
                    <option value="northeast">Northeast</option>
                    <option value="northwest">Northwest</option>
                    <option value="southeast">Southeast</option>
                    <option value="southwest">Southwest</option>
                </select>
            </div>

            <div class="form-group">
                <label for="trafficControls">Traffic Controls at Scene</label>
                <div class="checkbox-group traffic-controls">
                    <div class="traffic-control-row">
                        <label class="traffic-control-item">
                            <input type="checkbox" name="trafficControls[]" value="traffic_light">
                            <span class="traffic-control-label">Traffic Light</span>
                        </label>
                        <label class="traffic-control-item">
                            <input type="checkbox" name="trafficControls[]" value="stop_sign">
                            <span class="traffic-control-label">Stop Sign</span>
                        </label>
                        <label class="traffic-control-item">
                            <input type="checkbox" name="trafficControls[]" value="yield_sign">
                            <span class="traffic-control-label">Yield Sign</span>
                        </label>
                    </div>
                    <div class="traffic-control-row">
                        <label class="traffic-control-item">
                            <input type="checkbox" name="trafficControls[]" value="crosswalk">
                            <span class="traffic-control-label">Crosswalk</span>
                        </label>
                        <label class="traffic-control-item">
                            <input type="checkbox" name="trafficControls[]" value="school_zone">
                            <span class="traffic-control-label">School Zone</span>
                        </label>
                        <label class="traffic-control-item">
                            <input type="checkbox" name="trafficControls[]" value="construction_zone">
                            <span class="traffic-control-label">Construction Zone</span>
                        </label>
                    </div>
                    <div class="traffic-control-row">
                        <label class="traffic-control-item">
                            <input type="checkbox" name="trafficControls[]" value="none">
                            <span class="traffic-control-label">None</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="trafficControlStatus">Status of Traffic Control</label>
                <select id="trafficControlStatus" name="trafficControlStatus" required>
                    <option value="">Select status</option>
                    <option value="working">Working Properly</option>
                    <option value="malfunctioning">Malfunctioning</option>
                    <option value="not_applicable">Not Applicable</option>
                </select>
            </div>

            <div class="form-group">
                <label for="accidentDescription">Detailed Description of the Accident</label>
                <textarea id="accidentDescription" name="accidentDescription" rows="6" required 
                    placeholder="Please provide a detailed description of how the accident occurred, including:
                    - The sequence of events leading up to the accident
                    - The actions of all vehicles involved
                    - Any contributing factors (weather, road conditions, etc.)
                    - The point of impact
                    - The final resting positions of the vehicles"></textarea>
            </div>

            <div class="form-group">
                <label for="roadConditions">Road Conditions at Time of Accident</label>
                <select id="roadConditions" name="roadConditions" required>
                    <option value="">Select condition</option>
                    <option value="dry">Dry</option>
                    <option value="wet">Wet</option>
                    <option value="icy">Icy</option>
                    <option value="snow_covered">Snow Covered</option>
                    <option value="gravel">Gravel</option>
                    <option value="construction">Under Construction</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="form-group">
                <label for="lightingConditions">Lighting Conditions</label>
                <select id="lightingConditions" name="lightingConditions" required>
                    <option value="">Select condition</option>
                    <option value="daylight">Daylight</option>
                    <option value="dawn">Dawn</option>
                    <option value="dusk">Dusk</option>
                    <option value="dark_lit">Dark - Street Lights On</option>
                    <option value="dark_unlit">Dark - No Street Lights</option>
                </select>
            </div>
        </div>

        <!-- Page 9: Signature and Confirmation -->
        <div class="form-page" data-page="9">
            <h2>Signature and Confirmation</h2>
            
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="accuracyConfirmation" name="accuracyConfirmation" required>
                    I confirm that all information provided in this incident report is accurate and complete to the best of my knowledge.
                </label>
            </div>

            <div class="form-group">
                <label>Signature</label>
                <div class="signature-container">
                    <input type="text" id="signatureInput" class="signature-input" placeholder="Type your full name" required>
                    <input type="hidden" id="signatureData" name="signatureData" required>
                </div>
            </div>
        </div>

        <!-- Hidden template for damage markers -->
        <template id="damageMarkerTemplate">
            <div class="damage-marker">
                <div class="damage-info">
                    <label>Damage Type:</label>
                    <select class="damage-type-select">
                        <option value="">Select damage type</option>
                        <option value="dent">Dent</option>
                        <option value="scratch">Scratch</option>
                        <option value="crack">Crack</option>
                        <option value="break">Break</option>
                        <option value="missing">Missing Part</option>
                        <option value="paint">Paint Damage</option>
                        <option value="glass">Glass Damage</option>
                        <option value="mechanical">Mechanical Damage</option>
                        <option value="other">Other</option>
                    </select>
                </div>
            </div>
        </template>

        <!-- Hidden template for damage list items -->
        <template id="damageListItemTemplate">
            <div class="damage-item">
                <span class="damage-location"></span>
                <span class="damage-type"></span>
                <button type="button" class="remove-damage">Remove</button>
            </div>
        </template>

        <!-- Hidden template for witness information -->
        <template id="witnessTemplate">
            <div class="witness-section">
                <h3>Witness <span class="witness-number"></span></h3>
                <div class="form-group">
                    <label for="witnessFirstName">First Name</label>
                    <input type="text" id="witnessFirstName" name="witnessFirstName[]" autocomplete="given-name" required>
                </div>
                <div class="form-group">
                    <label for="witnessLastName">Last Name</label>
                    <input type="text" id="witnessLastName" name="witnessLastName[]" autocomplete="family-name" required>
                </div>
                <div class="form-group">
                    <label for="witnessAddress">Address</label>
                    <input type="text" id="witnessAddress" name="witnessAddress[]" autocomplete="street-address" required>
                </div>
                <div class="form-group">
                    <label for="witnessCity">City</label>
                    <input type="text" id="witnessCity" name="witnessCity[]" autocomplete="address-level2" required>
                </div>
                <div class="form-group">
                    <label for="witnessState">State</label>
                    <select id="witnessState" name="witnessState[]" autocomplete="address-level1" required>
                        <option value="">Select State</option>
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="witnessZip">ZIP Code</label>
                    <input type="text" id="witnessZip" name="witnessZip[]" autocomplete="postal-code" required>
                </div>
                <div class="form-group">
                    <label for="witnessPhone">Phone Number</label>
                    <input type="tel" id="witnessPhone" name="witnessPhone[]" autocomplete="tel" required>
                </div>
            </div>
        </template>

        <div class="form-navigation">
            <button type="button" class="nav-button" id="prevButton" disabled>Previous</button>
            <button type="button" class="nav-button" id="nextButton">Next</button>
            <button type="submit" class="submit-button" id="submitButton" style="display: none;">Submit Report</button>
        </div>
    </form>
</div>

<!-- Terms and Conditions Modal -->
<div id="termsModal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Terms and Conditions</h2>
        <div class="modal-body">
            <section class="terms-section">
                <h3>1. Acceptance of Terms</h3>
                <p>By accessing and using this incident report system, you accept and agree to be bound by the terms and provision of this agreement.</p>
            </section>

            <section class="terms-section">
                <h3>2. Information Accuracy</h3>
                <p>You agree to provide accurate, current, and complete information in all required fields of the incident report form. You are responsible for maintaining the confidentiality of your information and for all activities that occur under your account.</p>
            </section>

            <section class="terms-section">
                <h3>3. Data Collection and Privacy</h3>
                <p>We collect personal information necessary to process your incident report. This information may include but is not limited to:</p>
                <ul>
                    <li>Personal identification details</li>
                    <li>Contact information</li>
                    <li>Vehicle information</li>
                    <li>Insurance details</li>
                    <li>Incident details and descriptions</li>
                </ul>
            </section>

            <section class="terms-section">
                <h3>4. Use of Information</h3>
                <p>The information provided in your incident report will be used for:</p>
                <ul>
                    <li>Processing and evaluating your claim</li>
                    <li>Communicating with you about your report</li>
                    <li>Legal and insurance purposes</li>
                    <li>Improving our services</li>
                </ul>
            </section>

            <section class="terms-section">
                <h3>5. Legal Compliance</h3>
                <p>You agree to comply with all applicable laws and regulations in relation to your use of this service. You are responsible for ensuring that all information provided is truthful and accurate to the best of your knowledge.</p>
            </section>

            <section class="terms-section">
                <h3>6. Limitation of Liability</h3>
                <p>We are not liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use of or inability to use this service.</p>
            </section>

            <section class="terms-section">
                <h3>7. Changes to Terms</h3>
                <p>We reserve the right to modify these terms at any time. Your continued use of the service following any changes indicates your acceptance of the new terms.</p>
            </section>
        </div>
        <div class="modal-footer">
            <button class="accept-terms-btn">I Understand and Accept</button>
        </div>
    </div>
</div>

<!-- Privacy Policy Modal -->
<div id="privacyModal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Privacy Policy</h2>
        <div class="modal-body">
            <section class="terms-section">
                <h3>1. Information We Collect</h3>
                <p>We collect information that you provide directly to us when submitting an incident report, including:</p>
                <ul>
                    <li>Personal identification details</li>
                    <li>Contact information</li>
                    <li>Vehicle information</li>
                    <li>Insurance details</li>
                    <li>Incident details and descriptions</li>
                </ul>
            </section>

            <section class="terms-section">
                <h3>2. How We Use Your Information</h3>
                <p>We use the information we collect to:</p>
                <ul>
                    <li>Process and evaluate your incident report</li>
                    <li>Communicate with you about your report</li>
                    <li>Comply with legal obligations</li>
                    <li>Improve our services</li>
                </ul>
            </section>

            <section class="terms-section">
                <h3>3. Information Sharing</h3>
                <p>We may share your information with:</p>
                <ul>
                    <li>Insurance companies</li>
                    <li>Legal authorities when required by law</li>
                    <li>Service providers who assist in processing your report</li>
                </ul>
            </section>

            <section class="terms-section">
                <h3>4. Data Security</h3>
                <p>We implement appropriate security measures to protect your personal information from unauthorized access, alteration, disclosure, or destruction.</p>
            </section>

            <section class="terms-section">
                <h3>5. Your Rights</h3>
                <p>You have the right to:</p>
                <ul>
                    <li>Access your personal information</li>
                    <li>Request corrections to your information</li>
                    <li>Request deletion of your information</li>
                    <li>Opt-out of certain communications</li>
                </ul>
            </section>

            <section class="terms-section">
                <h3>6. Changes to This Policy</h3>
                <p>We may update this privacy policy from time to time. We will notify you of any changes by posting the new policy on this page.</p>
            </section>
        </div>
        <div class="modal-footer">
            <button class="accept-terms-btn">I Understand and Accept</button>
        </div>
    </div>
</div>

<!-- E-Signature Policy Modal -->
<div id="esignatureModal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>E-Signature Policy</h2>
        <div class="modal-body">
            <section class="terms-section">
                <h3>1. Electronic Signature Consent</h3>
                <p>By using an electronic signature on this incident report, you consent to the use of electronic signatures and records in lieu of paper-based signatures and records.</p>
            </section>

            <section class="terms-section">
                <h3>2. Legal Effect</h3>
                <p>Your electronic signature has the same legal effect as a handwritten signature. By signing electronically, you agree that:</p>
                <ul>
                    <li>The electronic signature is legally binding</li>
                    <li>You have the authority to sign on behalf of yourself or the entity you represent</li>
                    <li>You can access and retain electronic records</li>
                </ul>
            </section>

            <section class="terms-section">
                <h3>3. Signature Requirements</h3>
                <p>To be valid, your electronic signature must:</p>
                <ul>
                    <li>Be unique to you</li>
                    <li>Be capable of verification</li>
                    <li>Be under your sole control</li>
                    <li>Be linked to the document in a way that makes any subsequent changes detectable</li>
                </ul>
            </section>

            <section class="terms-section">
                <h3>4. Record Retention</h3>
                <p>We will maintain electronic records of your signed documents in accordance with applicable laws and regulations. You may request a copy of your signed documents at any time.</p>
            </section>

            <section class="terms-section">
                <h3>5. Withdrawal of Consent</h3>
                <p>You have the right to withdraw your consent to use electronic signatures. However, any documents signed electronically before withdrawal of consent will remain valid.</p>
            </section>

            <section class="terms-section">
                <h3>6. Technical Requirements</h3>
                <p>To use electronic signatures, you must have:</p>
                <ul>
                    <li>A compatible device with internet access</li>
                    <li>A web browser that supports JavaScript</li>
                    <li>The ability to view and print PDF documents</li>
                </ul>
            </section>
        </div>
        <div class="modal-footer">
            <button class="accept-terms-btn">I Understand and Accept</button>
        </div>
    </div>
</div>

<!-- Include modal.js -->
<script src="/javascripts/modal.js"></script>
<script src="/javascripts/signature.js"></script>
<script src="/javascripts/vehicle-damage.js"></script>

<%- include('partials/footer') %> 